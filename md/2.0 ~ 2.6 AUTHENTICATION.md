# 2. Authentication

## 2.0 Using Firebase Auth

우선 Router 에 있는 state를 옮길꺼임

왜냐면 Router 는 하나의 용도로만 쓰이는게 좋거든

Route 만 보여주게 말이야

그래서 state를 `App.js` 로 ㄱㄱ

```js
import React, { useState } from "react";
import AppRouter from "./Router";

function App() {
  const [isLoggedIn, setIsLoggedIn] = useState(false);
  return (
    <>
      <AppRouter isLoggedIn={isLoggedIn} />
      <footer>&copy; {new Date().getFullYear()} Nwitter</footer>
    </>
  );
}

export default App;
```

```js
const AppRouter = ({ isLoggedIn }) => {
  return (
    // .... 생략
  );
};
export default AppRouter;
```

---

자 이제 firebase 의 Authentication 를 해볼꺼임

그럴려면 import 해야하는데

```js
import "firebase/compat/auth";
```

근데 갑자기 니코가 임폴트 주소가 맘에 안든다봐

상대경로 싫데 절대경로로 할꺼래

`jsconfig.json`

```js
{
  "compilerOptions": {
    "baseUrl": "src"
  },
  "include": ["src"]
}
```

파일을 만들면

```js
import AppRouter from "components/Router";
```

이렇게 가능하다네?

좀 더 편하긴한데

흠 ㅇㅋ

아무튼 `firebase.js` 파일 있자너

거기 import 보면

```js
import firebase from "firebase/compat/app";
```

이런데 firsbase를 import 하는데 이럼 import 가 이상해질 수 있어

그래서 `firebase.js` 파일명을 바꿀꺼야 `fbase.js` 로

---

자 이제 진짜 Auth 를 써보자

이걸 이용해서 로그인 여부를 판별할꺼임

유저를 가져오는데 없으면 null 이 뜰꺼임

```js
import React, { useState } from "react";
import AppRouter from "components/Router";
import fbase from "fbase";

function App() {
  const auth = fbase.auth();

  const [isLoggedIn, setIsLoggedIn] = useState(auth.currentUser);
  return (
    // ... 생략
  );
}

export default App;
```

이렇게 쓰꺼나 또는

fbase 를 좀 손 봐서

`fbase.js`

```js
// ... 생략

firebase.initializeApp(firebaseConfig);

export const authService = firebase.auth();
```

`App.js`

```js
import React, { useState } from "react";
import AppRouter from "components/Router";
import { authService } from "fbase";

function App() {
  const [isLoggedIn, setIsLoggedIn] = useState(authService.currentUser);
  return (
    //... 생략
  );
}

export default App;

```

이럼 된다

## 2.1 Login Form part One

firebase 들가서 Nwitter Authentication 들가면

유저가 한명도 없는걸 알 수 있음 ㅋ

당연함 ㅋㅋ

자 이제 로그인 방법 설정 ㄱㄱ

이메일, 구글, 깃헙 ㄱㄱㄱ

깃헙은 settings 에 OAuth Apps 들가서 하면 됨

기억 안나면 영상 들가서 참고 ㄱㄱ

그리고 auth.js 을 구현 ㄱㄱ

```js
import React, { useState } from "react";

const Auth = () => {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const onChange = (event) => {
    const { name, value } = event.target;
    // const {target : {name, value},} =event;
    if (name === "email") {
      setEmail(value);
    } else if (name === "password") {
      setPassword(value);
    }
  };
  const onSubmit = (event) => {
    event.preventDefault();
  };
  return (
    <div>
      <form onSubmit={onSubmit}>
        <input
          name="email"
          type="email"
          placeholder="Email"
          required
          value={email}
          onChange={onChange}
        />
        <input
          name="password"
          type="password"
          placeholder="Password"
          required
          value={password}
          onChange={onChange}
        />
        <input type="submit" value="Log In" />
      </form>
      <div>
        <button>Continue with Google</button>
        <button>Continue with Github</button>
      </div>
    </div>
  );
};
export default Auth;
```
